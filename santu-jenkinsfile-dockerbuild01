pipeline {
  agent ("santunode01") {
  environment {
    DOCKER_TAG = getDockerTag()
  }
  stages {
    stage (" Build Docker image") {
      steps {
        sh " docker build -t santu459/nodeapp:${DOCKER_TAG} ."
      }
    }
  }
  }
}

def getDockerTag() {
  def tag = sh "git rev-parse HEAD", returnStdout: true
  return tag
}
